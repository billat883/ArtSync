(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{164:function(e,t,n){Promise.resolve().then(n.bind(n,6587))},6587:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n(7437),r=n(4114),a=n(7648),s=n(4418),o=n(2265),l=n(4552),u=n(9868),c=n(6822),d=n(8113),p=n(8231);function m(){let{chainId:e,ethersReadonlyProvider:t}=(0,s.D)(),{events:n,ongoing:m,upcoming:y,ended:f,loading:x,error:b}=function(e){let{chainId:t,readonlyProvider:n}=e,[i,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(!1),[m,h]=(0,o.useState)(void 0),y=(0,o.useMemo)(()=>{if(!t)return;let e=d.H[t.toString()];return(null==e?void 0:e.address)&&e.address!==l.N?e.address:void 0},[t]);(0,o.useEffect)(()=>{let e=!1;return async function(){if(y&&n){s(!0),h(void 0),r([]);try{let t=new u.CH(y,c.O.abi,n),i=Number(await t.nextExhibitId()),a=[];for(let e=1;e<i;e++)try{let n=await t.getExhibitHeader(e),i={id:e,organizer:n.organizer,metadataCID:n.metadataCID,startTime:Number(n.startTime),endTime:Number(n.endTime),mintPOAP:!!n.enablePass};try{let e=await fetch((0,p.i)(i.metadataCID));if(e.ok){let t=await e.json();i.title=t.title,i.location=t.location,i.description=t.description}}catch(e){}a.push(i)}catch(e){}e||r(a)}catch(n){var t;e||h(null!==(t=null==n?void 0:n.message)&&void 0!==t?t:"Failed to load")}finally{e||s(!1)}}}(),()=>{e=!0}},[y,n]);let f=Date.now()/1e3,x=(0,o.useMemo)(()=>i.filter(e=>e.startTime<=f&&f<=e.endTime),[i,f]),b=(0,o.useMemo)(()=>i.filter(e=>f<e.startTime),[i,f]),v=(0,o.useMemo)(()=>i.filter(e=>e.endTime<f),[i,f]);return{events:i,ongoing:x,upcoming:b,ended:v,loading:a,error:m}}({chainId:e,readonlyProvider:t});return(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(r.w,{}),(0,i.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-12",children:[(0,i.jsxs)("div",{className:"mb-6 flex items-end justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-4xl font-bold mb-2",children:"\uD83D\uDD0D Explore Exhibits"}),(0,i.jsx)("p",{className:"text-white/60",children:"Discover more on-chain exhibitions"})]}),(0,i.jsx)(a.default,{href:"/organizer/create",className:"btn-gradient",children:"✨ Create"})]}),x&&(0,i.jsx)("div",{className:"card text-center py-10",children:"Loading on-chain data..."}),b&&(0,i.jsxs)("div",{className:"card text-center py-10 text-red-300",children:["Load failed: ",b]}),!x&&!b&&(0,i.jsxs)("div",{className:"space-y-10",children:[(0,i.jsx)(h,{title:"Ongoing",items:m,emptyHint:"No ongoing exhibits"}),(0,i.jsx)(h,{title:"Upcoming",items:y,emptyHint:"No upcoming schedules"}),(0,i.jsx)(h,{title:"Ended",items:f,emptyHint:"History will appear here"})]})]})]})}function h(e){let{title:t,items:n,emptyHint:r}=e;return(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold",children:t}),(0,i.jsxs)("span",{className:"text-white/60 text-sm",children:["Total ",n.length]})]}),0===n.length?(0,i.jsx)("div",{className:"card text-center py-8 text-white/60",children:r}):(0,i.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:n.map(e=>(0,i.jsx)(y,{e:e},e.id))})]})}function y(e){let{e:t}=e;return(0,i.jsxs)(a.default,{href:"/event/".concat(t.id),className:"card group",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h4",{className:"text-xl font-bold truncate max-w-[70%]",children:t.title||"Event #".concat(t.id)}),(0,i.jsxs)("span",{className:"text-white/60 text-sm",children:["#",t.id]})]}),(0,i.jsxs)("div",{className:"space-y-1 text-white/80",children:[t.location&&(0,i.jsxs)("p",{children:["\uD83D\uDCCD ",t.location]}),(0,i.jsxs)("p",{children:["⏰ ",new Date(1e3*t.startTime).toLocaleString()," ~ ",new Date(1e3*t.endTime).toLocaleString()]}),(0,i.jsxs)("p",{className:"text-white/60 text-sm break-all",children:["CID: ",t.metadataCID]})]}),(0,i.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,i.jsx)("span",{className:"badge {e.mintPOAP ? 'badge-success' : ''}",children:t.mintPOAP?"\uD83C\uDFA8 Pass":"—"}),(0,i.jsx)("span",{className:"btn-primary",children:"View details →"})]})]})}},257:function(e,t,n){"use strict";var i,r;e.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,i,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l=[],u=!1,c=-1;function d(){u&&i&&(u=!1,i.length?l=i.concat(l):c=-1,l.length&&p())}function p(){if(!u){var e=o(d);u=!0;for(var t=l.length;t;){for(i=l,l=[];++c<t;)i&&i[c].run();c=-1,t=l.length}i=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||o(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}},s=!0;try{t[e](a,a.exports,i),s=!1}finally{s&&delete n[e]}return a.exports}i.ab="//";var r=i(229);e.exports=r}()},6822:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});let i={abi:[{inputs:[{internalType:"address",name:"artPassToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"exhibitId",type:"uint256"},{indexed:!0,internalType:"address",name:"attendee",type:"address"}],name:"CheckedIn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"exhibitId",type:"uint256"},{indexed:!0,internalType:"address",name:"organizer",type:"address"}],name:"ExhibitScheduled",type:"event"},{inputs:[],name:"artPass",outputs:[{internalType:"contract IArtPassToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"canMintPass",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"},{internalType:"bytes32",name:"oneEncrypted",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"checkInEncrypted",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"getEncryptedAttendance",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"getExhibit",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"organizer",type:"address"},{internalType:"string",name:"metadataCID",type:"string"},{internalType:"uint64",name:"startTime",type:"uint64"},{internalType:"uint64",name:"endTime",type:"uint64"},{internalType:"bool",name:"enablePass",type:"bool"},{internalType:"bytes32",name:"encryptedCount",type:"bytes32"}],internalType:"struct ArtExpoFHE.Exhibit",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"getExhibitHeader",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"organizer",type:"address"},{internalType:"string",name:"metadataCID",type:"string"},{internalType:"uint64",name:"startTime",type:"uint64"},{internalType:"uint64",name:"endTime",type:"uint64"},{internalType:"bool",name:"enablePass",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"hasCheckedIn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"mintPass",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nextExhibitId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"metadataCID",type:"string"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"enablePass",type:"bool"}],name:"scheduleExhibit",outputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}]}},8113:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});let i={11155111:{chainId:11155111,chainName:"sepolia",address:"0xb28DBf343c94c7600ba7e7A48Ec27a1d6e308857"}}},4114:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var i=n(7437),r=n(7648),a=n(4418);function s(){let{isConnected:e,connect:t,accounts:n,chainId:s}=(0,a.D)(),o=null==n?void 0:n[0],l=o?"".concat(o.slice(0,6),"...").concat(o.slice(-4)):"";return(0,i.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 border-b border-white/10 bg-black/80 backdrop-blur-md",children:(0,i.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-4 flex items-center justify-between",children:[(0,i.jsxs)(r.default,{href:"/",className:"flex items-center gap-3 group relative",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-2 border-primary flex items-center justify-center font-bold text-2xl text-primary group-hover:border-techblue group-hover:text-techblue transition-all duration-300 font-mono",children:"A"}),(0,i.jsxs)("div",{className:"leading-tight",children:[(0,i.jsx)("div",{className:"font-bold text-xl tracking-widest font-mono",children:"ARTSYNC"}),(0,i.jsx)("div",{className:"text-[10px] text-white/50 tracking-[0.2em] font-mono",children:"FHE_EXPO"})]})]}),(0,i.jsxs)("nav",{className:"flex items-center gap-1",children:[(0,i.jsx)(r.default,{href:"/organizer",className:"px-4 py-2 border border-transparent hover:border-white/20 transition-all text-sm font-mono tracking-wider",children:"[ORGANIZE]"}),(0,i.jsx)(r.default,{href:"/explore",className:"px-4 py-2 border border-transparent hover:border-white/20 transition-all text-sm font-mono tracking-wider",children:"[EXPLORE]"}),(0,i.jsx)(r.default,{href:"/badges",className:"px-4 py-2 border border-transparent hover:border-white/20 transition-all text-sm font-mono tracking-wider",children:"[PASSES]"}),(0,i.jsx)("div",{className:"w-px h-6 bg-white/20 mx-2"}),e?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"badge-success",children:[(0,i.jsx)("span",{className:"w-1.5 h-1.5 bg-green-400"}),l]}),(0,i.jsx)("span",{className:"badge-info",children:s})]}):(0,i.jsx)("button",{className:"btn-gradient px-4 py-2 text-sm font-mono",onClick:t,children:"[CONNECT]"})]})]})})}},4418:function(e,t,n){"use strict";n.d(t,{D:function(){return c},c:function(){return u}});var i=n(7437),r=n(9146),a=n(9222),s=n(2265),o=n(4744);let l=(0,s.createContext)(void 0);function u(e){let{children:t,initialMockChains:n}=e,u=function(e){let{initialMockChains:t}=e,{provider:n,chainId:i,accounts:l,isConnected:u,connect:c,error:d}=(0,o._)(),[p,m]=(0,s.useState)(void 0),[h,y]=(0,s.useState)(void 0),[f,x]=(0,s.useState)(void 0),b=(0,s.useRef)(i),v=(0,s.useRef)(void 0),T=(0,s.useRef)(e=>e===b.current),g=(0,s.useRef)(e=>e===v.current);return(0,s.useEffect)(()=>{b.current=i},[i]),(0,s.useEffect)(()=>{if(!n||!i||!u||!l||0===l.length){v.current=void 0,m(void 0),y(void 0),x(void 0);return}let e=new r.Q(n),s=e,o=null==t?void 0:t[i];o&&(s=new a.r6(o));let c=new a.C1(e,l[0]);v.current=c,m(c),y(e),x(s)},[n,i,u,l,t]),{sameChain:T,sameSigner:g,provider:n,chainId:i,accounts:l,isConnected:u,connect:c,ethersBrowserProvider:h,ethersReadonlyProvider:f,ethersSigner:p,error:d,initialMockChains:t}}({initialMockChains:n});return(0,i.jsx)(l.Provider,{value:u,children:t})}function c(){let e=(0,s.useContext)(l);if(!e)throw Error("useMetaMaskEthersSigner must be used within MetaMaskEthersSignerProvider");return e}},4744:function(e,t,n){"use strict";n.d(t,{Y:function(){return s},_:function(){return o}});var i=n(7437),r=n(2265);let a=(0,r.createContext)(void 0);function s(e){let{children:t}=e,[n,s]=(0,r.useState)(void 0),[o,l]=(0,r.useState)(void 0),[u,c]=(0,r.useState)(void 0),[d,p]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{let e=window;e.ethereum&&s(e.ethereum)},[]);let m=(0,r.useCallback)(async()=>{if(n)try{let e=await n.request({method:"eth_chainId"});l(parseInt(e,16));let t=await n.request({method:"eth_accounts"});c(t),p(void 0)}catch(e){p(e)}},[n]);(0,r.useEffect)(()=>{m()},[m]);let h=(0,r.useCallback)(async()=>{if(n)try{let e=await n.request({method:"eth_requestAccounts"});c(e),await m()}catch(e){p(e)}},[n,m]),y=(0,r.useMemo)(()=>{var e;return(null!==(e=null==u?void 0:u.length)&&void 0!==e?e:0)>0},[u]);return(0,i.jsx)(a.Provider,{value:{provider:n,chainId:o,accounts:u,isConnected:y,error:d,connect:h},children:t})}function o(){let e=(0,r.useContext)(a);if(!e)throw Error("useMetaMask must be used within MetaMaskProvider");return e}},8231:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(257);function r(e){let t=(i.env.NEXT_PUBLIC_IPFS_GATEWAY||"https://ipfs.io/ipfs/").replace(/\/+$/,"");return"".concat(t,"/").concat(e)}}},function(e){e.O(0,[146,648,971,117,560],function(){return e(e.s=164)}),_N_E=e.O()}]);