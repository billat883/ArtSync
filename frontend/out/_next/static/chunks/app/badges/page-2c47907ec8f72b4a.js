(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{4828:function(e,t,n){Promise.resolve().then(n.bind(n,5832))},5832:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(7437),a=n(4114),s=n(4418),r=n(2265),l=n(4552),d=n(9868),u=n(6822),o=n(8113);function c(){let{chainId:e,ethersSigner:t,ethersReadonlyProvider:n}=(0,s.D)(),{items:c,loading:m,error:y,claim:h}=function(e){let{chainId:t,signer:n,readonlyProvider:i}=e,[a,s]=(0,r.useState)([]),[c,p]=(0,r.useState)(!1),[m,y]=(0,r.useState)(void 0),h=(0,r.useMemo)(()=>{if(!t)return;let e=o.H[t.toString()];return(null==e?void 0:e.address)&&e.address!==l.N?e.address:void 0},[t]);return(0,r.useEffect)(()=>{let e=!1;return async function(){if(h&&i&&n){p(!0),y(void 0),s([]);try{let t=new d.CH(h,u.O.abi,i),a=await n.getAddress(),r=Number(await t.nextExhibitId()),l=[];for(let e=1;e<r;e++)try{let n=await t.canMintPass(e,a),i=await t.hasCheckedIn(e,a),s=!1;i&&!n&&(s=!0),l.push({id:e,canClaim:n,hasSigned:i,claimed:s})}catch(e){}e||s(l)}catch(n){var t;e||y(null!==(t=null==n?void 0:n.message)&&void 0!==t?t:"Failed to load")}finally{e||p(!1)}}}(),()=>{e=!0}},[h,i,n]),{items:a,loading:c,error:m,claim:async function(e){if(!h||!n)throw Error("no signer");let t=new d.CH(h,u.O.abi,n),i=await t.mintPass(e);await i.wait()}}}({chainId:e,signer:t,readonlyProvider:n});return(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(a.w,{}),(0,i.jsxs)("main",{className:"mx-auto max-w-5xl px-6 py-12",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-4xl font-bold mb-2",children:"\uD83C\uDFC5 My Passes"}),(0,i.jsx)("p",{className:"text-white/60",children:"Claim your NFT art passes after successful check-in"})]}),m&&(0,i.jsx)("div",{className:"card text-center py-10",children:"Loading..."}),y&&(0,i.jsx)("div",{className:"card text-center py-10 text-red-300",children:y}),!m&&!y&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{className:"text-2xl font-bold mb-3",children:"Claimable"}),(0,i.jsx)(p,{items:c.filter(e=>e.canClaim),onClaim:h,emptyHint:"No passes available to claim"})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{className:"text-2xl font-bold mb-3",children:"Claimed / Checked-in"}),(0,i.jsx)(p,{items:c.filter(e=>!e.canClaim&&e.hasSigned),onClaim:h,emptyHint:"No records yet"})]})]})]})]})}function p(e){let{items:t,onClaim:n,emptyHint:a}=e;return 0===t.length?(0,i.jsx)("div",{className:"card text-center py-8 text-white/60",children:a}):(0,i.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:t.map(e=>(0,i.jsxs)("div",{className:"card flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-xl font-bold",children:["Event #",e.id]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:e.canClaim?"Claimable":e.claimed?"Claimed":e.hasSigned?"Checked-in":""})]}),(0,i.jsx)("div",{children:e.canClaim?(0,i.jsx)("button",{className:"btn-gradient",onClick:async()=>await n(e.id),children:"\uD83C\uDF89 Claim"}):(0,i.jsx)("button",{className:"btn-primary",disabled:!0,children:"Not available"})})]},e.id))})}},6822:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});let i={abi:[{inputs:[{internalType:"address",name:"artPassToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"exhibitId",type:"uint256"},{indexed:!0,internalType:"address",name:"attendee",type:"address"}],name:"CheckedIn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"exhibitId",type:"uint256"},{indexed:!0,internalType:"address",name:"organizer",type:"address"}],name:"ExhibitScheduled",type:"event"},{inputs:[],name:"artPass",outputs:[{internalType:"contract IArtPassToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"canMintPass",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"},{internalType:"bytes32",name:"oneEncrypted",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"checkInEncrypted",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"getEncryptedAttendance",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"getExhibit",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"organizer",type:"address"},{internalType:"string",name:"metadataCID",type:"string"},{internalType:"uint64",name:"startTime",type:"uint64"},{internalType:"uint64",name:"endTime",type:"uint64"},{internalType:"bool",name:"enablePass",type:"bool"},{internalType:"bytes32",name:"encryptedCount",type:"bytes32"}],internalType:"struct ArtExpoFHE.Exhibit",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"getExhibitHeader",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"organizer",type:"address"},{internalType:"string",name:"metadataCID",type:"string"},{internalType:"uint64",name:"startTime",type:"uint64"},{internalType:"uint64",name:"endTime",type:"uint64"},{internalType:"bool",name:"enablePass",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"hasCheckedIn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],name:"mintPass",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nextExhibitId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"metadataCID",type:"string"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"enablePass",type:"bool"}],name:"scheduleExhibit",outputs:[{internalType:"uint256",name:"exhibitId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}]}},8113:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});let i={11155111:{chainId:11155111,chainName:"sepolia",address:"0xb28DBf343c94c7600ba7e7A48Ec27a1d6e308857"}}},4114:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var i=n(7437),a=n(7648),s=n(4418);function r(){let{isConnected:e,connect:t,accounts:n,chainId:r}=(0,s.D)(),l=null==n?void 0:n[0],d=l?"".concat(l.slice(0,6),"...").concat(l.slice(-4)):"";return(0,i.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 border-b border-white/10 bg-black/80 backdrop-blur-md",children:(0,i.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-4 flex items-center justify-between",children:[(0,i.jsxs)(a.default,{href:"/",className:"flex items-center gap-3 group relative",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-2 border-primary flex items-center justify-center font-bold text-2xl text-primary group-hover:border-techblue group-hover:text-techblue transition-all duration-300 font-mono",children:"A"}),(0,i.jsxs)("div",{className:"leading-tight",children:[(0,i.jsx)("div",{className:"font-bold text-xl tracking-widest font-mono",children:"ARTSYNC"}),(0,i.jsx)("div",{className:"text-[10px] text-white/50 tracking-[0.2em] font-mono",children:"FHE_EXPO"})]})]}),(0,i.jsxs)("nav",{className:"flex items-center gap-1",children:[(0,i.jsx)(a.default,{href:"/organizer",className:"px-4 py-2 border border-transparent hover:border-white/20 transition-all text-sm font-mono tracking-wider",children:"[ORGANIZE]"}),(0,i.jsx)(a.default,{href:"/explore",className:"px-4 py-2 border border-transparent hover:border-white/20 transition-all text-sm font-mono tracking-wider",children:"[EXPLORE]"}),(0,i.jsx)(a.default,{href:"/badges",className:"px-4 py-2 border border-transparent hover:border-white/20 transition-all text-sm font-mono tracking-wider",children:"[PASSES]"}),(0,i.jsx)("div",{className:"w-px h-6 bg-white/20 mx-2"}),e?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"badge-success",children:[(0,i.jsx)("span",{className:"w-1.5 h-1.5 bg-green-400"}),d]}),(0,i.jsx)("span",{className:"badge-info",children:r})]}):(0,i.jsx)("button",{className:"btn-gradient px-4 py-2 text-sm font-mono",onClick:t,children:"[CONNECT]"})]})]})})}},4418:function(e,t,n){"use strict";n.d(t,{D:function(){return o},c:function(){return u}});var i=n(7437),a=n(9146),s=n(9222),r=n(2265),l=n(4744);let d=(0,r.createContext)(void 0);function u(e){let{children:t,initialMockChains:n}=e,u=function(e){let{initialMockChains:t}=e,{provider:n,chainId:i,accounts:d,isConnected:u,connect:o,error:c}=(0,l._)(),[p,m]=(0,r.useState)(void 0),[y,h]=(0,r.useState)(void 0),[x,b]=(0,r.useState)(void 0),f=(0,r.useRef)(i),v=(0,r.useRef)(void 0),w=(0,r.useRef)(e=>e===f.current),g=(0,r.useRef)(e=>e===v.current);return(0,r.useEffect)(()=>{f.current=i},[i]),(0,r.useEffect)(()=>{if(!n||!i||!u||!d||0===d.length){v.current=void 0,m(void 0),h(void 0),b(void 0);return}let e=new a.Q(n),r=e,l=null==t?void 0:t[i];l&&(r=new s.r6(l));let o=new s.C1(e,d[0]);v.current=o,m(o),h(e),b(r)},[n,i,u,d,t]),{sameChain:w,sameSigner:g,provider:n,chainId:i,accounts:d,isConnected:u,connect:o,ethersBrowserProvider:y,ethersReadonlyProvider:x,ethersSigner:p,error:c,initialMockChains:t}}({initialMockChains:n});return(0,i.jsx)(d.Provider,{value:u,children:t})}function o(){let e=(0,r.useContext)(d);if(!e)throw Error("useMetaMaskEthersSigner must be used within MetaMaskEthersSignerProvider");return e}},4744:function(e,t,n){"use strict";n.d(t,{Y:function(){return r},_:function(){return l}});var i=n(7437),a=n(2265);let s=(0,a.createContext)(void 0);function r(e){let{children:t}=e,[n,r]=(0,a.useState)(void 0),[l,d]=(0,a.useState)(void 0),[u,o]=(0,a.useState)(void 0),[c,p]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{let e=window;e.ethereum&&r(e.ethereum)},[]);let m=(0,a.useCallback)(async()=>{if(n)try{let e=await n.request({method:"eth_chainId"});d(parseInt(e,16));let t=await n.request({method:"eth_accounts"});o(t),p(void 0)}catch(e){p(e)}},[n]);(0,a.useEffect)(()=>{m()},[m]);let y=(0,a.useCallback)(async()=>{if(n)try{let e=await n.request({method:"eth_requestAccounts"});o(e),await m()}catch(e){p(e)}},[n,m]),h=(0,a.useMemo)(()=>{var e;return(null!==(e=null==u?void 0:u.length)&&void 0!==e?e:0)>0},[u]);return(0,i.jsx)(s.Provider,{value:{provider:n,chainId:l,accounts:u,isConnected:h,error:c,connect:y},children:t})}function l(){let e=(0,a.useContext)(s);if(!e)throw Error("useMetaMask must be used within MetaMaskProvider");return e}}},function(e){e.O(0,[146,648,971,117,560],function(){return e(e.s=4828)}),_N_E=e.O()}]);